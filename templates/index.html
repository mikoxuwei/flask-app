<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數值分析與演算作業</title>
    <script>
        function fetchTSMCData() {
            fetch('/get_tsmc_data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('tsmc-info').innerText = data.stock_info;
                })
                .catch(error => {
                    console.error('Error fetching TSMC data:', error);
                });
        }

        function checkInvoice(event) {
            event.preventDefault(); // 防止表單提交刷新頁面
            
            const invoiceNumber = document.getElementById('invoice_number').value;
            
            fetch('/invoice-check', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ invoice_number: invoiceNumber })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('invoice-result').innerText = data.result;
            })
            .catch(error => {
                console.error('Error checking invoice:', error);
                document.getElementById('invoice-result').innerText = "發生錯誤，請稍後再試";
            });
        }
    </script>
</head>
<body>
    <h2>這是數值分析與演算的期末作業</h2>
    <button onclick="fetchTSMCData()">獲取台積電股票資訊</button>
    <p id="tsmc-info"></p> <!-- 顯示台積電股票資訊 -->
    <h3>發票檢查功能</h3>
    <form id="invoice-form" onsubmit="checkInvoice(event)">
        <label for="invoice_number">請輸入發票號碼:</label>
        <input type="text" id="invoice_number" name="invoice_number" required>
        <button type="submit">檢查發票</button>
    </form>
    <p id="invoice-result"></p> <!-- 顯示發票檢查結果 -->
</body>
</html>